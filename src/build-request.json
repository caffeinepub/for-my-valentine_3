{
  "kind": "build_request",
  "title": "Rollback app to previously working Version 15",
  "priority": "high",
  "requirements": [
    {
      "id": "REQ-66",
      "text": "Revert (roll back) the entire application codebase and bundled static assets to exactly what was deployed as Version 15, replacing the current Version 29+ state.",
      "target": "both",
      "source": {
        "messageIds": [
          "msg-3"
        ],
        "quotes": [
          "can you revert this application to version 15"
        ]
      },
      "acceptanceCriteria": [
        "The repository/app state matches the Version 15 snapshot (frontend + backend + static assets), with no remaining changes introduced after Version 15.",
        "All builds succeed without errors using the Version 15 state.",
        "The Preview loads successfully without runtime errors."
      ]
    },
    {
      "id": "REQ-67",
      "text": "After rolling back to Version 15, redeploy the application so the live Preview reflects Version 15 behavior and renders correctly end-to-end.",
      "target": "both",
      "source": {
        "messageIds": [
          "msg-3"
        ],
        "quotes": [
          "can you revert this application to version 15"
        ]
      },
      "acceptanceCriteria": [
        "Deployment completes successfully.",
        "Preview loads successfully.",
        "User can click through the Valentine flow without the build/deploy failure encountered in the current version."
      ]
    }
  ],
  "constraints": [
    "Frontend immutable paths must not be edited: frontend/src/hooks/useInternetIdentity.ts, frontend/src/hooks/useInternetIdentity.tsx, frontend/src/hooks/useActor.ts, frontend/src/main.tsx, frontend/src/components/ui.",
    "Backend must remain a single Motoko actor with logic in backend/main.mo; only add backend/migration.mo if a state upgrade is required."
  ],
  "nonGoals": [
    "Do not implement new features or UI changes beyond restoring Version 15.",
    "Do not attempt additional 'remove stock images' changes as part of this rollback unless they were already part of Version 15."
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}